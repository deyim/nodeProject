<div class="cont">
	<div class="titlearea">
		<div class="title">스토어정보조회</div>
		<div class="nav">스토어정보 관리 > 스토어정보조회</div>
	</div>
	
	{{!-- {{#each store.cities}}
		{{this.city}}
	{{/each}} --}}
	{{!-- {{#each store_nations}}
		{{this.nation}} --}}
		{{!-- {{#each store_cities}}
			{{this.city}}
		{{/each}} --}}
	{{!-- {{/each}} --}}
	<div class="product_write">
		<form method="POST">
		<table cellpadding="0" cellspacing="0" class="de_table">
			<tbody>
				
				<tr>
					<th>스토어명 *</th>
					<td>{{store.name}}</td>
					<th>가입회원수</th>
					<td>{{store.memberCnt}}</td>
				</tr>
				
				
				<tr>
					<th>스토어소개 *</th>
					<td colspan="3">
						<div class="input_100box">
							<input type="text" class="inputstyle" name="introduction" value="{{store.introduction}}"></input>
						</div>
					</td>
				</tr>
				
				<tr>
					<th>스토어로고이미지</th>
					<td>
						<div class="compulsory_img">
							<div class="image"><img src="{{store.storeLogoPath}}" alt="로고이미지"></div>
							<div class="buttonarea">
								<div class="change fileUpload" id="{{store.id}} storeLogoPath">찾아보기</div>
								
							</div>
						</div>
					</td>
					
					<th>스토어 대표이미지</th>
					<td>
						<div class="compulsory_img">
							<div class="image"><img src="{{store.storeImgPath}}" alt="대표이미지"></div>
							<div class="buttonarea">
								<div class="change fileUpload" id="{{store.id}} storeImgPath">찾아보기</div>								
							</div>
						</div>
					</td>
				</tr>
				
				
				<tr id="nation_city_choose">
					<th>국가 / 도시선택 *</th>
					<td colspan="3">
						<div class="input_25box">
							<select class="inputstyle" name="nation" id="nation_select">
								<option value="">국가 선택</option>
								{{#each nations}}
									<option value={{this.id}}>{{this.nation}}</option>
								{{/each}}
							</select>
						</div>
						
						<div class="input_25box" id="city_select">
							<select class="inputstyle" name="city" id="city_options">
							</select>
						</div>

						<div class="inline">
								<div class="plus_button" id="city_add">도시선택</div>
								<div class="plus_button" id="nation_add">행추가</div>
							</div>

						<div class="plus_boxarea" id="cities">
						</div>
					</td>
				</tr>

				{{#each store_nations}}
				<tr id="nation_city_choose">
					<th>국가 / 도시선택 *</th>
					<td colspan="3">
						<div class="input_25box">
							<select class="inputstyle" name="nation" id="nation_select">
								<option value="">{{this.nation}}</option>
							</select>
						</div>
						
						<div class="input_25box" id="city_select">
							<select class="inputstyle" name="city" id="city_options">
								{{!-- {{#each cities}}
									<option value={{this.id}} {{}}>{{this.nation}}</option>
								{{/each}} --}}
							</select>
						</div>

						<div class="inline">
								<div class="plus_button" id="city_add">도시선택</div>
								<div class="plus_button" id="nation_add">행추가</div>
							</div>

						<div class="plus_boxarea" id="cities">
							{{#each store.cities}}
								{{this.city}}{{ ../this.id}}
								{{selectCities this.city ../this.id}}
							{{/each}}
						</div>
					</td>
				</tr>
				{{/each}}
				
				
				
				
				<tr>
					<th>사업자명</th>
					<td>
						<div class="input_100box">
                            <input type="text" class="inputstyle" name="companyName" value={{provider.companyName}}></input>
                        </div>
					</td>
					<th>사업자등록번호</th>
					<td>
						<div class="input_100box">
                            <input type="text" class="inputstyle" name="companyNumber" value={{provider.companyNumber}}></input>
                        </div>
					</td>
				</tr>
				
				
				<tr>
					<th>아이디</th>
					<td>{{user.username}}</td>
					<th>회원유형</th>
					<td>{{setCompanyType provider.companyType}}</td>
				</tr>
				
				<tr>
					<th>대표자명</th>
					<td>{{provider.CEO}}</td>
					<th>법인등록번호</th>
					<td>{{provider.corporateNumber}}</td>
				</tr>
				
				
				<tr>
					<th>업태</th>
					<td>
						<div class="input_100box">
                            <input type="text" class="inputstyle" name="businessType" value={{provider.businessType}}></input>
                        </div>
					</td>
					<th>업종</th>
					<td>
						<div class="input_100box">
                            <input type="text" class="inputstyle" name="businessCategory" value={{provider.businessCategory}}></input>
                        </div>
					</td>
				</tr>
				
				<tr>
					<th>통신판매업 신고번호</th>
					<td colspan="3">
						<div class="input_100box">
                            <input type="text" class="inputstyle" name="commuNumber" value={{provider.commuNumber}}></input>
                        </div>
					</td>
				</tr>
				
				
				<tr>
					<th>대표전화번호</th>
					<td>
						<div class="input_100box">
                            <input type="text" class="inputstyle" name="CEONumber" value={{provider.CEONumber}}></input>
                        </div>
						{{!-- <div class="listdg_button">
							
							<div class="input_25box">
								<select class="inputstyle">
									<option>02</option>
									<option>031</option>
									<option>032</option>
									<option>033</option>
									<option>034</option>
									<option>041</option>
								</select>
							</div>
								<div class="inline">-</div>
								
							<div class="input_25box">
								<input type="text" class="inputstyle"></input>
							</div>
							<div class="inline">-</div>
							<div class="input_25box">
								<input type="text" class="inputstyle"></input>
							</div>
						</div> --}}
					</td>
					
					<th>팩스</th>
					<td>
						<div class="input_100box">
                            <input type="text" class="inputstyle" name="faxNumber"value={{provider.faxNumber}}></input>
                        </div>
						{{!-- <div class="listdg_button">
							
							<div class="input_25box">
								<select class="inputstyle">
									<option>02</option>
									<option>031</option>
									<option>032</option>
									<option>033</option>
									<option>034</option>
									<option>041</option>
								</select>
							</div>
								<div class="inline">-</div>
								
							<div class="input_25box">
								<input type="text" class="inputstyle"></input>
							</div>
							<div class="inline">-</div>
							<div class="input_25box">
								<input type="text" class="inputstyle"></input>
							</div>
						</div> --}}
					</td>
				</tr>
				
				
				<tr>
					<th>담당자이름</th>
					<td>
						<div class="input_100box">
                            <input type="text" class="inputstyle" name="staffName" value={{provider.staffName}}></input>
                        </div>
					</td>
					
					<th>담당자전화번호</th>
					<td>
						<div class="input_100box">
                            <input type="text" class="inputstyle" name="staffNumber" value={{provider.staffNumber}}></input>
                        </div>
						{{!-- <div class="listdg_button">
							
							<div class="input_25box">
								<select class="inputstyle">
									<option>02</option>
									<option>031</option>
									<option>032</option>
									<option>033</option>
									<option>034</option>
									<option>041</option>
								</select>
							</div>
								<div class="inline">-</div>
								
							<div class="input_25box">
								<input type="text" class="inputstyle"></input>
							</div>
							<div class="inline">-</div>
							<div class="input_25box">
								<input type="text" class="inputstyle"></input>
							</div>
						</div> --}}
					</td>
				</tr>
				
				
				
				
				
				
				
				<tr>
					<th>출금신청입금계좌</th>
					<td colspan="3">
						<div class="input_25box">
                            <input type="text" class="inputstyle" name="accountNumber" value={{provider.accountNumber}}></input>
                        </div>
                        <div class="input_25box">
                            <input type="text" class="inputstyle" name="accountName" value={{provider.accountName}}></input>
                        </div>
                        <div class="input_25box">
                            <input type="text" class="inputstyle" name="accountBank" value={{provider.accountBank}}></input>
                        </div>
					</td>
				</tr>
				
				{{!-- <tr>
					<th>총계수수료방식</th>
					<td>
						<div class="inline"><input type="checkbox"></input> 월정액</div>
						<div class="inline"><input type="checkbox"></input> 판매수수료</div>
					</td>
					
					<th>적용요율(비용)*</th>
					<td>
						<div class="input_25box">
							<input type="text" class="inputstyle" value="5.0"></input>
						</div>
						<div class="inline">%</div>
					</td>
				</tr> --}}

				<tr>
                    <th>* 해외 거주 국가 / 도시</th>
                    <td>
                        <div class="input_40box">
                            <input type="text" class="inputstyle" name="frNation" value="{{provider.frNation}}"></input>
                        </div>
                        
                        <div class="input_40box">
                            <input type="text" class="inputstyle"name="frCity" value="{{provider.frCity}}"></input>
                        </div>
                    </td>	
                    
                    <th>* 현지전화번호</th>
                    <td>
                        <div class="input_100box">
                            <input type="text" class="inputstyle" name="frPhone" value="{{provider.frPhone}}"></input>
                        </div>
                        {{!-- <div class="inline"> -</div>
                        <div class="input_40box">
                            <input type="text" class="inputstyle" placeholder="108523148"></input>
                        </div> --}}
                    </td>	
                </tr>

				{{#each store.storeFiles}}
                <tr>
					<th>* 업로드파일<br>5개까지 가능</th>
                    <td colspan="3">
                        <div class="listdg_button">
                            <div class="inline">
                                <div class="file_name">{{this.filePath}}</div>
                                <div class="inline_dg_button">삭제</div>
                            </div>
                            <div class="inline_down_button">다운로드</div>
                        </div>
                    </td>
                </tr>
                {{/each}}

				
				
			</tbody>
		</table>
	</div>
	<div class="fileUpload_alert" style="display:none;">
			<div class="layer_back_area"></div>
			<div class="layer_area">
				<div class="showbox">
					<div class="showbox_cetearea">
						<div class="title">이미지첨부</div>
						<div class="close"><img src="/images/sub/showbox_close.png"></div>
					</div>
				
				
					<div class="showbox_contents">
						<input type="file"></input>
						<input type="hidden" value="" id="store_id" name="store_id">
						<input type="hidden" value="" id="img_or_logo" name="">
						<br>**저작권에 유의해 주세요!!
						<div class="bot_button">
							<div class="inline_wt_button">
								<input type="submit" name="" value="첨부">
							</div>
						</div>
					</div>
				</div>
			</div>          
		</div>
	
	{{>modify_delete id=store.id url='/stores' }}
	</form>
</div>

<script>
//국가 선택에 따라 도시 바뀜
	$(document).ready(function(){
		$(document).on('change', '#nation_select', function(){
			$.ajax({
				url: "/stores/products/updatenation", 
				data: {
					nation: $(this).val()
				},
				success: function(result){
					$("#nation").val(result.nation.nation);
					$('#city_options').empty();
					$.each(result.cities, function (i, city) {
						$('#city_options').append($('<option>', { 
							value: city.id,
							text : city.city 
						}));
					});
			}});
		});
	});

//도시 추가
	$(document).ready(function(){
		 $(document).on('click', '#city_add', function(){
			let elt = document.getElementById('city_options');   
    		let city = elt.options[elt.selectedIndex].text;
			$('#cities').append("<div class='appended_city city_delete'>"+city+"<span>X<span></div>");
		});
	}); 

//국가 도시 선택 행 추가
	$(document).ready(function(){
		 $(document).on('click', '#nation_add', function(){
			let toCopy = $('#nation_city_choose').clone();
			$('#nation_city_choose').before(toCopy);
			$('#nation_city_choose').find('#cities').empty();
			

		});
	}); 

//도시 삭제
	$(document).ready(function(){
		$(document).on('click', '.city_delete', function(){
			$(this).remove();
		});
	}); 


</script>